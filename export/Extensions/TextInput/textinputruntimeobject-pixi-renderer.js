var gdjs;(function(l){const p={text:"text",email:"email",password:"password",number:"number","telephone number":"tel",url:"url",search:"search"},o=(n,t)=>"rgba("+n[0]+","+n[1]+","+n[2]+","+t/255+")";class h{constructor(t){this._input=null;this._object=t,this._runtimeScene=t.getRuntimeScene(),this._runtimeGame=this._runtimeScene.getGame(),this._createElement()}_createElement(){if(this._input)throw new Error("Tried to recreate an input while it already exists.");const t=this._object.getInputType()==="text area";this._input=document.createElement(t?"textarea":"input"),this._input.style.border="1px solid black",this._input.autocomplete="off",this._input.style.borderRadius="0px",this._input.style.backgroundColor="white",this._input.style.position="absolute",this._input.style.resize="none",this._input.style.outline="none",this._input.style.pointerEvents="auto",this._input.style.display="none",this._input.addEventListener("input",()=>{!this._input||this._object.onRendererInputValueChanged(this._input.value)}),this._input.addEventListener("touchstart",()=>{!this._input||document.activeElement!==this._input&&this._input.focus()}),this.updateString(),this.updateFont(),this.updatePlaceholder(),this.updateOpacity(),this.updateInputType(),this.updateTextColor(),this.updateFillColorAndOpacity(),this.updateBorderColorAndOpacity(),this.updateBorderWidth(),this.updateDisabled(),this.updateReadOnly(),this._runtimeGame.getRenderer().getDomElementContainer().appendChild(this._input)}_destroyElement(){!this._input||(this._input.remove(),this._input=null)}onScenePaused(){this._destroyElement()}onSceneResumed(){this._createElement()}onDestroy(){this._destroyElement()}updatePreRender(){if(!this._input)return;if(this._object.isHidden()){this._input.style.display="none";return}const t=this._runtimeScene.getLayer(this._object.getLayer());if(!t.isVisible()){this._input.style.display="none";return}const e=this._runtimeScene.getGame(),i=e.getRenderer(),r=t.convertInverseCoords(this._object.x,this._object.y,0),u=t.convertInverseCoords(this._object.x+this._object.getWidth(),this._object.y+this._object.getHeight(),0);if(u[0]<0||u[1]<0||r[0]>e.getGameResolutionWidth()||r[1]>e.getGameResolutionHeight()){this._input.style.display="none";return}const s=i.convertCanvasToDomElementContainerCoords(r),a=i.convertCanvasToDomElementContainerCoords(u),d=a[0]-s[0],c=a[1]-s[1];this._input.style.left=s[0]+"px",this._input.style.top=s[1]+"px",this._input.style.width=d+"px",this._input.style.height=c+"px",this._input.style.transform="rotate3d(0,0,1,"+this._object.getAngle()%360+"deg)",this._input.style.fontSize=this._object.getFontSize()*i.getCanvasToDomElementContainerHeightScale()+"px",this._input.style.display="initial"}updateString(){!this._input||(this._input.value=this._object.getString())}updatePlaceholder(){!this._input||(this._input.placeholder=this._object.getPlaceholder())}updateFont(){!this._input||(this._input.style.fontFamily=this._runtimeScene.getGame().getFontManager().getFontFamily(this._object.getFontResourceName()))}updateOpacity(){!this._input||(this._input.style.opacity=""+this._object.getOpacity()/255)}updateInputType(){if(!this._input)return;const t=this._input instanceof HTMLTextAreaElement,e=this._object.getInputType()==="text area";t!==e&&(this._destroyElement(),this._createElement());const i=p[this._object.getInputType()]||"text";this._input.setAttribute("type",i)}updateTextColor(){!this._input||(this._input.style.color=o(this._object._getRawTextColor(),255))}updateFillColorAndOpacity(){!this._input||(this._input.style.backgroundColor=o(this._object._getRawFillColor(),this._object.getFillOpacity()))}updateBorderColorAndOpacity(){!this._input||(this._input.style.borderColor=o(this._object._getRawBorderColor(),this._object.getBorderOpacity()))}updateBorderWidth(){!this._input||(this._input.style.borderWidth=this._object.getBorderWidth()+"px")}updateDisabled(){!this._input||(this._input.disabled=this._object.isDisabled())}updateReadOnly(){!this._input||(this._input.readOnly=this._object.isReadOnly())}isFocused(){return this._input===document.activeElement}}l.TextInputRuntimeObjectRenderer=h})(gdjs||(gdjs={}));
//# sourceMappingURL=textinputruntimeobject-pixi-renderer.js.map
